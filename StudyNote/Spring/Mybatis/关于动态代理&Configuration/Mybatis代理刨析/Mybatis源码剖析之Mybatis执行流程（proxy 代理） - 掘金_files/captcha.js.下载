!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).verifyCenter={})}(this,(function(t){"use strict";var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};var n={exports:{}};!function(t,n){t.exports=function(){function t(t){var e=typeof t;return null!==t&&("object"===e||"function"===e)}function n(t){return"function"==typeof t}var o=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},i=0,r=void 0,s=void 0,c=function(t,e){g[i]=t,g[i+1]=e,2===(i+=2)&&(s?s(_):C())};function a(t){s=t}function u(t){c=t}var l="undefined"!=typeof window?window:void 0,p=l||{},d=p.MutationObserver||p.WebKitMutationObserver,f="undefined"==typeof self&&"undefined"!=typeof process&&"[object process]"==={}.toString.call(process),h="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function v(){return function(){return process.nextTick(_)}}function y(){return void 0!==r?function(){r(_)}:w()}function m(){var t=0,e=new d(_),n=document.createTextNode("");return e.observe(n,{characterData:!0}),function(){n.data=t=++t%2}}function b(){var t=new MessageChannel;return t.port1.onmessage=_,function(){return t.port2.postMessage(0)}}function w(){var t=setTimeout;return function(){return t(_,1)}}var g=new Array(1e3);function _(){for(var t=0;t<i;t+=2){(0,g[t])(g[t+1]),g[t]=void 0,g[t+1]=void 0}i=0}function O(){try{var t=Function("return this")().require("vertx");return r=t.runOnLoop||t.runOnContext,y()}catch(t){return w()}}var C=void 0;function k(t,e){var n=this,o=new this.constructor(R);void 0===o[E]&&X(o);var i=n._state;if(i){var r=arguments[i-1];c((function(){return D(i,o,r,n._result)}))}else{q(n,o,t,e)}return o}function S(t){var e=this;if(t&&"object"==typeof t&&t.constructor===e){return t}var n=new e(R);return W(n,t),n}C=f?v():d?m():h?b():void 0===l?O():w();var E=Math.random().toString(36).substring(2);function R(){}var L=void 0,j=1,F=2;function x(){return new TypeError("You cannot resolve a promise with itself")}function T(){return new TypeError("A promises callback cannot return that same promise.")}function V(t,e,n,o){try{t.call(e,n,o)}catch(t){return t}}function P(t,e,n){c((function(t){var o=!1,i=V(n,e,(function(n){o||(o=!0,e!==n?W(t,n):H(t,n))}),(function(e){o||(o=!0,M(t,e))}),"Settle: "+(t._label||" unknown promise"));!o&&i&&(o=!0,M(t,i))}),t)}function A(t,e){e._state===j?H(t,e._result):e._state===F?M(t,e._result):q(e,void 0,(function(e){return W(t,e)}),(function(e){return M(t,e)}))}function N(t,e,o){e.constructor===t.constructor&&o===k&&e.constructor.resolve===S?A(t,e):void 0===o?H(t,e):n(o)?P(t,e,o):H(t,e)}function W(e,n){if(e===n){M(e,x())}else if(t(n)){var o=void 0;try{o=n.then}catch(t){return void M(e,t)}N(e,n,o)}else{H(e,n)}}function B(t){t._onerror&&t._onerror(t._result),I(t)}function H(t,e){t._state===L&&(t._result=e,t._state=j,0!==t._subscribers.length&&c(I,t))}function M(t,e){t._state===L&&(t._state=F,t._result=e,c(B,t))}function q(t,e,n,o){var i=t._subscribers,r=i.length;t._onerror=null,i[r]=e,i[r+j]=n,i[r+F]=o,0===r&&t._state&&c(I,t)}function I(t){var e=t._subscribers,n=t._state;if(0!==e.length){for(var o=void 0,i=void 0,r=t._result,s=0;s<e.length;s+=3){o=e[s],i=e[s+n],o?D(n,o,i,r):i(r)}t._subscribers.length=0}}function D(t,e,o,i){var r=n(o),s=void 0,c=void 0,a=!0;if(r){try{s=o(i)}catch(t){a=!1,c=t}if(e===s){return void M(e,T())}}else{s=i}e._state!==L||(r&&a?W(e,s):!1===a?M(e,c):t===j?H(e,s):t===F&&M(e,s))}function z(t,e){try{e((function(e){W(t,e)}),(function(e){M(t,e)}))}catch(e){M(t,e)}}var U=0;function J(){return U++}function X(t){t[E]=U++,t._state=void 0,t._result=void 0,t._subscribers=[]}function K(){return new Error("Array Methods must be provided an Array")}var Y=function(){function t(t,e){this._instanceConstructor=t,this.promise=new t(R),this.promise[E]||X(this.promise),o(e)?(this.length=e.length,this._remaining=e.length,this._result=new Array(this.length),0===this.length?H(this.promise,this._result):(this.length=this.length||0,this._enumerate(e),0===this._remaining&&H(this.promise,this._result))):M(this.promise,K())}return t.prototype._enumerate=function(t){for(var e=0;this._state===L&&e<t.length;e++){this._eachEntry(t[e],e)}},t.prototype._eachEntry=function(t,e){var n=this._instanceConstructor,o=n.resolve;if(o===S){var i=void 0,r=void 0,s=!1;try{i=t.then}catch(t){s=!0,r=t}if(i===k&&t._state!==L){this._settledAt(t._state,e,t._result)}else if("function"!=typeof i){this._remaining--,this._result[e]=t}else if(n===et){var c=new n(R);s?M(c,r):N(c,t,i),this._willSettleAt(c,e)}else{this._willSettleAt(new n((function(e){return e(t)})),e)}}else{this._willSettleAt(o(t),e)}},t.prototype._settledAt=function(t,e,n){var o=this.promise;o._state===L&&(this._remaining--,t===F?M(o,n):this._result[e]=n),0===this._remaining&&H(o,this._result)},t.prototype._willSettleAt=function(t,e){var n=this;q(t,void 0,(function(t){return n._settledAt(j,e,t)}),(function(t){return n._settledAt(F,e,t)}))},t}();function G(t){return new Y(this,t).promise}function $(t){var e=this;return o(t)?new e((function(n,o){for(var i=t.length,r=0;r<i;r++){e.resolve(t[r]).then(n,o)}})):new e((function(t,e){return e(new TypeError("You must pass an array to race."))}))}function Q(t){var e=new this(R);return M(e,t),e}function Z(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function tt(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}var et=function(){function t(e){this[E]=J(),this._result=this._state=void 0,this._subscribers=[],R!==e&&("function"!=typeof e&&Z(),this instanceof t?z(this,e):tt())}return t.prototype.catch=function(t){return this.then(null,t)},t.prototype.finally=function(t){var e=this,o=e.constructor;return n(t)?e.then((function(e){return o.resolve(t()).then((function(){return e}))}),(function(e){return o.resolve(t()).then((function(){throw e}))})):e.then(t,t)},t}();function nt(){var t=void 0;if(void 0!==e){t=e}else if("undefined"!=typeof self){t=self}else{try{t=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}}var n=t.Promise;if(n){var o=null;try{o=Object.prototype.toString.call(n.resolve())}catch(t){}if("[object Promise]"===o&&!n.cast){return}}t.Promise=et}return et.prototype.then=k,et.all=G,et.race=$,et.resolve=S,et.reject=Q,et._setScheduler=a,et._setAsap=u,et._asap=c,et.polyfill=nt,et.Promise=et,et}()}(n);var o=n.exports,i=function(){return i=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++){for(var i in e=arguments[n]){Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}}return t},i.apply(this,arguments)};function r(t,e){var n={};for(var o in t){Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o])}if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(o=Object.getOwnPropertySymbols(t);i<o.length;i++){e.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(t,o[i])&&(n[o[i]]=t[o[i]])}}return n}function s(t,e,n,i){return new(n||(n=o.Promise))((function(o,r){function s(t){try{a(i.next(t))}catch(t){r(t)}}function c(t){try{a(i.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,c)}a((i=i.apply(t,e||[])).next())}))}function c(t,e){var n,o,i,r,s={label:0,sent:function(){if(1&i[0]){throw i[1]}return i[1]},trys:[],ops:[]};return r={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function c(c){return function(a){return function(c){if(n){throw new TypeError("Generator is already executing.")}for(;r&&(r=0,c[0]&&(s=0)),s;){try{if(n=1,o&&(i=2&c[0]?o.return:c[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,c[1])).done){return i}switch(o=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return s.label++,{value:c[1],done:!1};case 5:s.label++,o=c[1],c=[0];continue;case 7:c=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==c[0]&&2!==c[0])){s=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){s.label=c[1];break}if(6===c[0]&&s.label<i[1]){s.label=i[1],i=c;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(c);break}i[2]&&s.ops.pop(),s.trys.pop();continue}c=e.call(t,s)}catch(t){c=[6,t],o=0}finally{n=i=0}}if(5&c[0]){throw c[1]}return{value:c[0]?c[1]:void 0,done:!0}}([c,a])}}}function a(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n){t[o]=n[o]}}return t}"function"==typeof SuppressedError&&SuppressedError;var u,l=function t(e,n){function o(t,o,i){if("undefined"!=typeof document){"number"==typeof(i=a({},n,i)).expires&&(i.expires=new Date(Date.now()+864e5*i.expires)),i.expires&&(i.expires=i.expires.toUTCString()),t=encodeURIComponent(t).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var r="";for(var s in i){i[s]&&(r+="; "+s,!0!==i[s]&&(r+="="+i[s].split(";")[0]))}return document.cookie=t+"="+e.write(o,t)+r}}return Object.create({set:o,get:function(t){if("undefined"!=typeof document&&(!arguments.length||t)){for(var n=document.cookie?document.cookie.split("; "):[],o={},i=0;i<n.length;i++){var r=n[i].split("="),s=r.slice(1).join("=");try{var c=decodeURIComponent(r[0]);if(o[c]=e.read(s,c),t===c){break}}catch(t){}}return t?o[t]:o}},remove:function(t,e){o(t,"",a({},e,{expires:-1}))},withAttributes:function(e){return t(this.converter,a({},this.attributes,e))},withConverter:function(e){return t(a({},this.converter,e),this.attributes)}},{attributes:{value:Object.freeze(n)},converter:{value:Object.freeze(e)}})}({read:function(t){return'"'===t[0]&&(t=t.slice(1,-1)),t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(t){return encodeURIComponent(t).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"}),p="s_v_web_id",d="/notify/sms/web/send_code",f="/notify/sms/check_code",h=function(t){for(var e=Object.keys(t),n="",o=0;o<e.length;o++){var i=e[o],r=t[i],s="".concat(encodeURIComponent(i),"=").concat(r?encodeURIComponent(r):"");n=o>=1?"".concat(n,"&").concat(s):s}return n},v=function(t){try{return"{}"!==JSON.stringify(t)}catch(t){return!1}},y=function(t){var e=["bgColor","borderRadius","titleColor","closeIconColor","slideBgColor","slideBorderRadius","slideIconColor","slideSlotBorderRadius","slideSlotBgColor","slideSlotDescColor","slidingSlotBgColor","slidingSlotBgEndColor","refreshIconColor","refreshFontColor","feedbackIconColor","feedbackFontColor","sureBtnBgColor","sureBtnFontColor"],n={};for(var o in t){e.indexOf(o)>=0&&(n[o]=t[o])}return n},m={option:!1,moveHandler:function(t){t.preventDefault()},init:function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("test",(function(){}),e)}catch(t){}this.option=!!t&&{passive:!1}},disable:function(){document.addEventListener("touchmove",this.moveHandler,this.option),console.log("bytedance://disable_swipe")},allow:function(){document.removeEventListener("touchmove",this.moveHandler,this.option),console.log("bytedance://enable_swipe")}},b=function(){var t=this;this.setCookieOption=function(e){e.domain&&/^([a-z0-9-]+)?(\.[a-z0-9-]+)+$/.test(e.domain)||delete e.domain,t.cookieOption=i(i({},t.cookieOption),e)},this.setOptionFp=function(e){t.optionFp=e},this.injectFpToCookie=function(){var e=l.get(p);return e&&0===e.indexOf("verify_")||(e=t.setFpToCookie()),e},this.setFpToCookie=function(e){e=e||function(){var t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),e=t.length,n=(new Date).getTime().toString(36),o=[];o[8]=o[13]=o[18]=o[23]="_",o[14]="4";for(var i=0,r=void 0;i<36;i++){o[i]||(r=0|Math.random()*e,o[i]=t[19==i?3&r|8:r])}return"verify_"+n+"_"+o.join("")}(),l.remove(p,{path:"/"}),l.set(p,e,t.cookieOption);var n=l.get(p);return n||(l.set(p,e,i(i({},t.cookieOption),{secure:!0,sameSite:"none"})),n=l.get(p)),n},this.getOrSetFp=function(e){return s(t,void 0,void 0,(function(){return c(this,(function(t){return e&&e!==this.fp&&(this.fp=this.setFpToCookie(e)),[2,this.fp]}))}))},this.getFp=function(){return t.optionFp?t.optionFp:l.get(p)||""};var e="object"==typeof window.fpCookieOption?window.fpCookieOption:{};e.domain&&/^([a-z0-9-]+)?(\.[a-z0-9-]+)+$/.test(e.domain)||delete e.domain,this.cookieOption=i({path:"/",expires:60},e),this.fp=this.injectFpToCookie()},w=function(){function t(){var t=this;this.callSuccess=function(){t.successCallbacks.forEach((function(t){t({code:200,data:null,message:"验证通过"})})),t.clearCallback()},this.callClose=function(){t.closeCallbacks.forEach((function(t){t()})),t.clearCallback()},this.clearCallback=function(){t.closeCallbacks.length=0,t.successCallbacks.length=0},this.setCallback=function(e,n){e&&"function"==typeof e&&t.successCallbacks.push(e),n&&"function"==typeof n&&t.closeCallbacks.push(n)},this.outputParams=function(){var e=t.captchaOptions,n=e.aid,o=e.did,i=e.app_name,r=e.host,s=e.lang,c=e.viewport,a=e.baseEM,u=e.theme,l=e.verify_data;return{aid:n,did:o,app_name:i,host:r||"https://verify.zijieapi.com",lang:s,viewport:c,baseEM:a,challenge_code:e.challenge_code,theme:"object"==typeof u?JSON.stringify(u):u,verify_data:"object"==typeof l?JSON.stringify(l):l}},this.options={},this.captchaOptions={},this.closeCallbacks=[],this.successCallbacks=[]}return t.prototype.setOptions=function(t){this.options=t},t.prototype.setCaptchaOptions=function(t){this.clearCallback(),"function"==typeof t.successCb&&this.successCallbacks.push(t.successCb),"function"==typeof t.closeCb&&this.closeCallbacks.push(t.closeCb),this.captchaOptions=t},t}(),g=function(t,e){var n=this;this.listen=function(){n.selfWin.addEventListener("message",n.handleListen)},this.handleListen=function(t){var e,o,i,r,s,c,a;if(t.origin===n.origin){try{var u=JSON.parse(t.data),l=u.type,p=u.data;switch(l){case"ready":null===(e=n.readyListener)||void 0===e||e.call(n,p);break;case"resize":null===(o=n.resizeListener)||void 0===o||o.call(n,p);break;case"close":null===(i=n.closeListener)||void 0===i||i.call(n,p);break;case"success":null===(r=n.successListener)||void 0===r||r.call(n,p);break;case"error":null===(s=n.errorListener)||void 0===s||s.call(n,p);break;case"log":null===(c=n.logListener)||void 0===c||c.call(n,p);break;case"verify":null===(a=n.verify)||void 0===a||a.call(n,p)}}catch(t){}}},this.on=function(t,e){switch(t){case"ready":n.readyListener=e;break;case"resize":n.resizeListener=e;break;case"close":n.closeListener=e;break;case"success":n.successListener=e;break;case"error":n.errorListener=e;break;case"log":n.logListener=e;break;case"verify":n.verify=e}},this.destory=function(){n.selfWin.removeEventListener("message",n.handleListen)},this.selfWin=window,this.otherWin=t,this.origin=e,this.listen()},_=function(t){var e=this;this.isReady=!1,this.show=function(t){return s(e,void 0,void 0,(function(){var e,n,o,r,a,u,l,p,d,f,v,y,b,w=this;return c(this,(function(_){return e=t.root,n=t.props,o=n.myFp,r=n.myOption,a=n.myLogger,u=document.createElement("iframe"),e.appendChild(u),(l=document.createElement("div")).id="vc_captcha_wrapper",m.init(),m.disable(),p=this.setStyle(e,u,l,r),d="https://rmc.bytedance.com",r.captchaOptions.host&&r.captchaOptions.host.indexOf("boe-verify")>=0?d="https://rmc-boe.bytedance.net":r.captchaOptions.iframeHost&&(d=r.captchaOptions.iframeHost),f=new g(u.contentWindow,d),v=i({from:"iframe",fp:o.getFp(),env:JSON.stringify({screen:{w:window.screen.width,h:window.screen.height},browser:{w:window.outerWidth,h:window.outerHeight},page:{w:window.innerWidth,h:window.innerHeight},document:{width:document.documentElement.clientWidth},maskTime:Date.now(),h5_check_version:r.captchaOptions.h5_check_version})},r.outputParams()),y=function(t){m.allow(),p(t),w.myVerify.isRender=!1},b=Date.now(),u.src="".concat(d).concat("/verifycenter/captcha/v2","?").concat(h(function(t){var e={};for(var n in t){t[n]&&(e[n]=t[n])}return e}(v))),u.onload=function(){setTimeout((function(){return s(w,void 0,void 0,(function(){var t,n=this;return c(this,(function(i){switch(i.label){case 0:if(!1!==this.isReady){return[3,4]}f.destory(),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,this.loadScript()];case 2:return i.sent(),e.removeChild(u),e.appendChild(l),(t=new window.bdCaptcha.CaptchaVerify({info:{aid:v.aid,appName:v.app_name,lang:v.lang,did:v.did,fp:o.getFp()},ele:l.id,host:v.host,baseEM:v.baseEM,viewport:v.viewport,theme:r.captchaOptions.theme,env:{maskTime:Date.now(),h5_check_version:r.captchaOptions.h5_check_version},successCb:function(){r.callSuccess(),!1!==r.captchaOptions.autoClose&&y(l)},verify:function(t){y(l),n.myVerify.autoRender({commonOptions:{aid:2385},secondVerifyWebOptions:{callBack:function(){r.callSuccess()},closeCallBack:function(){r.callClose()}},verify_data:t})},closeCb:function(){r.callClose(),y(l)}})).init(),t.render(v.verify_data||v.challenge_code),[3,4];case 3:return i.sent(),y(u),[3,4];case 4:return a.trackEvent("load_iframe",{aid:v.aid,is_success:Number(this.isReady),duration:Date.now()-b}),[2]}}))}))}))},f.on("ready",(function(){w.isReady=!0})),f.on("resize",(function(t){var e=t.w,n=t.h;u.style.visibility="visible",u.style.width="".concat(e,"px"),u.style.height="".concat(n,"px")})),f.on("close",(function(){f.destory(),r.callClose(),y(u)})),f.on("success",(function(){f.destory(),r.callSuccess(),!1!==r.captchaOptions.autoClose&&y(u)})),f.on("verify",(function(t){y(u),w.myVerify.autoRender({commonOptions:{aid:2385},secondVerifyWebOptions:{callBack:function(){r.callSuccess()},closeCallBack:function(){r.callClose()}},verify_data:t})})),f.on("log",(function(t){a.log(t)})),[2]}))}))},this.loadScript=function(){var t=document.getElementsByTagName("head")[0],e=document.createElement("script");return t.appendChild(e),e.src="https://lf-cdn-tos.bytescm.com/obj/rc-verifycenter/rmc-captcha/@latest/captcha.js",new o.Promise((function(t,n){e.onload=function(){t(0)},e.onerror=function(){n()}}))},this.setStyle=function(t,e,n,o){var i=o.captchaOptions,r=i.showMode,s=i.disableSetBodyHidden,c=i.theme;e.style.border="none",e.style.display="block",e.style.visibility="hidden",t.style.display="block","mask"===r&&(t.style.zIndex="111111",t.style.position="fixed",t.style.width="100%",t.style.height="100%",t.style.backgroundColor="rgba(0, 0, 0, 0.512)",t.style.margin="auto",t.style.top="0px",t.style.bottom="0px",t.style.left="0px",t.style.right="0px",n.style.borderRadius="6px",n.style.overflow="hidden",n.style.position="absolute",n.style.left="50%",n.style.top="50%",n.style.transform="translate(-50%, -50%)",e.style.borderRadius="6px",e.style.overflow="hidden",e.style.position="absolute",e.style.left="50%",e.style.top="50%",e.style.transform="translate(-50%, -50%)",(null==c?void 0:c.borderRadius)&&(n.style.borderRadius=c.borderRadius,e.style.borderRadius=c.borderRadius));var a=document.body.style.overflow;return s||(document.body.style.overflow="hidden"),function(e){t.removeChild(e),t.style.display="none",s||(document.body.style.overflow=a)}},this.myVerify=t},O="turing_verify_sdk",C=function(){function t(t){var e=this;this.loadScript=function(){var t=document.getElementsByTagName("head")[0],e=document.createElement("script");return e.innerHTML="(function(win, export_obj) {\n\t\t\twin['LogAnalyticsObject'] = export_obj;\n\t\t\tif (!win[export_obj]) {\n\t\t\t\tfunction _collect() {\n\t\t\t\t\t_collect.q.push(arguments);\n\t\t\t\t}\n\t\t\t\t_collect.q = _collect.q || [];\n\t\t\t\twin[export_obj] = _collect;            \n\t\t\t}\n\t\t\twin[export_obj].l = +new Date();\n\t\t})(window, 'collectEvent');",t.appendChild(e),new o.Promise((function(e,n){var o=document.createElement("script");o.src="https://lf3-cdn-tos.bytescm.com/obj/static/log-sdk/collect/5.1/collect.js",o.async=!0,o.onload=function(){e(0)},o.onerror=function(){n()},t.appendChild(o)}))},this.init=function(t){return s(e,void 0,void 0,(function(){return c(this,(function(e){switch(e.label){case 0:if(window.collectEvent){return[3,4]}e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.loadScript()];case 2:case 3:return e.sent(),[3,4];case 4:return window.collectEvent("vc.init",{app_id:2018,channel:"cn"}),window.collectEvent("vc.config",{_staging_flag:0,user_unique_id:t,evtParams:{fp:t,product_host:window.location.host,product_path:window.location.pathname}}),window.collectEvent("vc.start"),[2]}}))}))},this.init(t.getFp())}return t.prototype.trackEvent=function(t,e){var n=i({key:"h5_"+t},e);try{window.collectEvent("vc.".concat(O),n)}catch(t){}},t.prototype.log=function(t){try{window.collectEvent("vc.".concat(O),t)}catch(t){}},t}(),k=function(){var t=this;this.loadScript=function(){var t=document.getElementsByTagName("head")[0];return new o.Promise((function(e,n){var o=document.createElement("script");o.src="https://lf-cdn-tos.bytescm.com/obj/rc-verifycenter/second-valid-web/1.3.2/index.js",o.async=!0,o.onload=function(){e(0)},o.onerror=function(){n()},t.appendChild(o)}))},this.show=function(e){return s(t,void 0,void 0,(function(){return c(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,this.loadScript()];case 1:return t.sent(),new window.AccountSecondVerifySDK(e).render(),[3,3];case 2:return t.sent(),[3,3];case 3:return[2]}}))}))}},S=function(t,e){var n=this;this.init=function(t){void 0===t&&(t={}),n.myOptions.setOptions(t);var e=t.captchaOptions;(null==e?void 0:e.fpCookieOption)&&(n.myFp.setCookieOption(e.fpCookieOption),v(e.fpCookieOption)&&n.myFp.setFpToCookie(n.myFp.getFp()))},this.renderCaptcha=function(t){return s(n,void 0,void 0,(function(){var e,n,o,s,a,u,l,p,d,f,h,m,b,w,g,_,O;return c(this,(function(c){if(this.isRender){return e=t.captchaOptions,o=(n=t).successCb,s=n.closeCb,o||s?this.myOptions.setCallback(o,s):e&&this.myOptions.setCallback(e.successCb,e.closeCb),[2]}if(t.aid?a=t:(u=this.myOptions.options,l=u.commonOptions,p=void 0===l?{}:l,d=u.captchaOptions,f=void 0===d?{}:d,h=r(u,["commonOptions","captchaOptions"]),b=(m=t).commonOptions,w=m.captchaOptions,g=r(m,["commonOptions","captchaOptions"]),a=i(i(i(i(i(i({},h),p),f),b),w),g)),function(t){if(void 0===t&&(t={}),"[object Object]"!==Object.prototype.toString.call(t)){throw console.error("Options must be an object"),new Error("Options must be an object")}if("number"!=typeof t.aid){throw new Error("The parameter aid is required and of type int")}}(a),function(t){if(t.ele=t.ele||"captcha_container",t.zIndex=t.zIndex||"111111",t.webdriver=String(window.navigator.webdriver),t.host=t.mainHost||t.host,t.did&&"0"===t.did&&delete t.did,!t.theme){var e=y(t);v(e)&&(t.theme=e)}}(a),this.myOptions.setCaptchaOptions(a),a.fp&&this.myFp.setOptionFp(a.fp),a.fpCookieOption&&this.myFp.setCookieOption(a.fpCookieOption),a.verify_data){_=a.verify_data;try{((O="string"==typeof _?JSON.parse(_):_).fp||O.Fp)&&this.myFp.getOrSetFp(O.fp||O.Fp)}catch(t){}}var C,k;return this.isRender=!0,this.myIframe.show({root:(C=a.ele,k=document.getElementById(C),k||((k=document.createElement("div")).id=C,document.body.appendChild(k)),k.style.display="block",k),props:{myFp:this.myFp,myOption:this.myOptions,myLogger:this.myLogger}}),[2]}))}))},this.renderSecondVerifyWeb=function(t){return s(n,void 0,void 0,(function(){var e,n,o,r;return c(this,(function(s){return e=t.commonOptions,n=t.verify_data,o=t.secondVerifyWebOptions,r=i(i(i(i(i({},this.myOptions.options.commonOptions),this.myOptions.options.secondVerifyWebOptions),e),o),{postPc:n.subtype||"mobile_sms_verify",fp:this.myFp.getFp()}),"mobile_sms_verify"===n.subtype||"mobile_up_sms_verify"===n.subtype||"mobile_voice_sms_verify"===n.subtype?r.account=n.mobile:"email_verify"===n.subtype?r.account=n.email:"mobile_sms_check_or_verify"===n.subtype&&(r.origin_decision=n.detail,r.is_login=n.login_status),n.verify_ticket&&(r.commonParams={verify_ticket:n.verify_ticket}),n.channel_mobile&&n.sms_content&&(r.channel_mobile=n.channel_mobile,r.sms_content=n.sms_content),function(t){if(void 0===t&&(t={}),"[object Object]"!==Object.prototype.toString.call(t)){throw console.error("Options must be an object"),new Error("Options must be an object")}if("number"!=typeof t.aid){throw new Error("The parameter aid is required and of type int")}}(r),(new k).show(r),[2]}))}))},this.autoRender=function(t){var e=t.verify_data,o=t.commonOptions,s=t.captchaOptions,c=t.secondVerifyWebOptions,a=r(t,["verify_data","commonOptions","captchaOptions","secondVerifyWebOptions"]);if(t.verify_data){try{var u="string"==typeof e?JSON.parse(e):e;1e4==+u.code?n.renderCaptcha(i(i({},a),{commonOptions:o,captchaOptions:s,verify_data:u})):2e4==+u.code&&n.renderSecondVerifyWeb({commonOptions:o,secondVerifyWebOptions:c,verify_data:u})}catch(t){throw new Error("The parameter verify_data is required")}}},this.closeCaptcha=function(){var t;if(null===(t=n.myOptions.captchaOptions)||void 0===t?void 0:t.ele){var e=document.getElementById(n.myOptions.captchaOptions.ele);e&&(document.body.classList&&document.body.classList.remove&&document.body.classList.remove("captcha-disable-scroll"),e.style.display="none")}},this.myOptions=t,this.myFp=e,this.myLogger=new C(e),this.myIframe=new _(this),this.isRender=!1};!function(t){t[t.captcha=1]="captcha",t[t.secondVerify=2]="secondVerify"}(u||(u={}));var E=function(){function t(t,e,n){this.myOptions=t,this.myVerify=e,t.options.smsOptions&&(this.sms=new n(t.options))}return t.prototype.render=function(t){var e=this,n=this.myOptions.options,o=n.commonOptions,r=n.captchaOptions,s=n.secondVerifyWebOptions;this.myVerify.autoRender({commonOptions:o,captchaOptions:i(i({},r),{successCb:function(t){var n,o;null===(n=null==r?void 0:r.successCb)||void 0===n||n.call(r,t),null===(o=e.onsuccess)||void 0===o||o.call(e,t,u.captcha)},closeCb:function(){var t,n;null===(t=null==r?void 0:r.closeCb)||void 0===t||t.call(r),null===(n=e.onclose)||void 0===n||n.call(e,u.captcha)}}),secondVerifyWebOptions:i(i({},s),{callBack:function(t){var n,o;null===(n=null==s?void 0:s.callBack)||void 0===n||n.call(s,t),null===(o=e.onsuccess)||void 0===o||o.call(e,t,u.secondVerify)},closeCallBack:function(){var t,n;null===(t=null==s?void 0:s.closeCallBack)||void 0===t||t.call(s),null===(n=e.onclose)||void 0===n||n.call(e,u.captcha)}}),verify_data:t})},t.prototype.getFp=function(){var t;return(null===(t=this.myOptions.captchaOptions)||void 0===t?void 0:t.fp)||this.myVerify.myFp.getFp()},t}(),R=function(t,e,n){void 0===n&&(n={});var r=n.headers?i({"Content-Type":"application/json"},n.headers):{"Content-Type":"application/json"};return function(t){var e=t.url,n=t.method,i=t.data,r=t.config;return new o.Promise((function(t,o){var s=new XMLHttpRequest;s.onreadystatechange=function(){if(s.readyState===s.DONE){if(s.status>=200&&s.status<300){var e={},n=s.response||s.responseText,i=s.getResponseHeader("Content-Type")||s.getResponseHeader("content-type");if(i&&-1!==i.indexOf("application/json")){try{e=JSON.parse(n)}catch(t){}}else{e=n}setTimeout((function(){t(e)}),0)}else{o(new TypeError("Network request failed, status: ".concat(s.status)))}}},s.onerror=function(){setTimeout((function(){o(new TypeError("Network request failed, occur error"))}),0)},s.ontimeout=function(){setTimeout((function(){o(new TypeError("Network request failed, timeout"))}),0)},s.onabort=function(){setTimeout((function(){o(new DOMException("Aborted","AbortError"))}),0)};var c=e;if((null==r?void 0:r.params)&&(c="".concat(c,"?").concat(h(r.params))),s.open(n,c,!0),(null==r?void 0:r.timeout)&&"number"==typeof r.timeout?s.timeout=r.timeout:s.timeout=5e3,null==r?void 0:r.headers){for(var a=r.headers,u=0,l=Object.keys(a);u<l.length;u++){var p=l[u];s.setRequestHeader(p,a[p])}}(null==r?void 0:r.withCredentials)&&(s.withCredentials=r.withCredentials),"POST"===n.toUpperCase()&&i?s.send(JSON.stringify(i)):s.send(null)}))}({url:t,method:"POST",data:e,config:i(i({},n),{headers:r})})},L=function(t){var e=this;this.host="",this.setHost=function(t){e.host=t},this.handler=function(t){return 0===t.code?t:o.Promise.reject(t)},this.sendCode=function(t,n){return void 0===n&&(n={}),s(e,void 0,void 0,(function(){return c(this,(function(e){return[2,R("".concat(this.host).concat(d),t,{params:n}).then(this.handler)]}))}))},this.validateCode=function(t){return s(e,void 0,void 0,(function(){return c(this,(function(e){return[2,R("".concat(this.host).concat(f),t).then(this.handler)]}))}))},t&&("/"===t.slice(-1)&&(t=t.slice(0,-1)),this.host=t)},j=function(t,e,n,o){t.autoRender({verify_data:e,captchaOptions:{successCb:function(){n()},closeCb:function(){o()}},secondVerifyWebOptions:{callBack:function(){n()},closeCallBack:function(){o()}}})},F=function(t,e,n){var o=n.myFp.getFp(),i=[],r=!1,s=function(){r=!0,i.forEach((function(t){return t()}))},c=function(){var n=new XMLHttpRequest;t.withCredentials&&(n.withCredentials=t.withCredentials),t.timeout&&(n.timeout=t.timeout),n.onload=function(){!function(e){t.getResponseHeader=function(){return e.getResponseHeader.apply(e,arguments)},t.getAllResponseHeaders=function(){return e.getAllResponseHeaders.apply(e,arguments)};for(var n=function(n){Object.defineProperty(t,n,{get:function(){return e[n]},enumerable:!0})},o=0,i=["readyState","status","statusText","response","responseText","responseType","responseURL","responseXML"];o<i.length;o++){n(i[o])}}(n),s()},n.ontimeout=function(){s()},n.onerror=function(){s()},n.onabort=function(){s()},e.forEach((function(t){var e=[].slice.call(t.arguments);"addEventListener"!==t.fnName&&"removeEventListener"!==t.fnName&&n[t.fnName].apply(n,e)}))},a=function(){var e=t.onreadystatechange,o=t.onload,a=t.onloadend;e&&(t.onreadystatechange=function(){var n=arguments,o=function(){e.apply(t,n)};!r&&t.readyState===XMLHttpRequest.DONE&&t.status>=200&&t.status<300?i.push(o):o()}),t.onload=function(){var e=arguments,a=function(){o&&o.apply(t,e)};t.status>=200&&t.status<300?(r||i.push(a),function(){if(t.status>=200&&t.status<300){var e=void 0;try{t.getAllResponseHeaders().indexOf("bdturing-verify")>=0&&(e=t.getResponseHeader("bdturing-verify"))}catch(t){}e?j(n,e,c,s):s()}else{s()}}()):a()},a&&(t.onloadend=function(){var e=arguments,n=function(){a.apply(t,e)};!r&&t.status>=200&&t.status<300?i.push(n):n()})},u={};e.forEach((function(e){var n,s,c=[].slice.call(e.arguments);switch(e.fnName){case"addEventListener":case"removeEventListener":var l=c[0];["readystatechange","load","loadend"].indexOf(l)>=0?"addEventListener"===e.fnName?(u[l]||(u[l]=[]),null===(n=u[l])||void 0===n||n.push({origin:e.origin,args:c})):u[l]&&(u[l]=null===(s=u[l])||void 0===s?void 0:s.filter((function(t){return t.args[1]!==c[1]}))):e.origin.apply(t,c);break;case"open":var p=c[1],d=p.indexOf("?")>=0,f="verifyFp=".concat(o,"&fp=").concat(o);c[1]=d?"".concat(p,"&").concat(f):"".concat(p,"?").concat(f),e.origin.apply(t,c);break;case"send":Object.keys(u).forEach((function(e){var n;null===(n=u[e])||void 0===n||n.forEach((function(n){var o=n.origin,s=n.args,c=s[1];s[1]=function(){var n=arguments;switch(e){case"readystatechange":!r&&t.readyState===XMLHttpRequest.DONE&&t.status>=200&&t.status<300?i.push((function(){c.apply(t,n)})):c.apply(t,arguments);break;case"load":case"loadend":!r&&t.status>=200&&t.status<300?i.push((function(){c.apply(t,n)})):c.apply(t,arguments)}},o.apply(t,s)}))})),a(),e.origin.apply(t,c);break;default:e.origin.apply(t,c)}}))},x=function(t,e){if(!window._vc_intercepted_fetch){window._vc_intercepted_fetch=!0;var n=window.fetch;window.fetch=function(){for(var i=[],r=0;r<arguments.length;r++){i[r]=arguments[r]}var s,c=i[0];return s=c instanceof URL?c.toString():c instanceof Request?c.url:c,t(s)?new o.Promise((function(t,o){var r=e.myFp.getFp(),c=s.indexOf("?")>=0,a="verifyFp=".concat(r,"&fp=").concat(r);s=c?"".concat(s,"&").concat(a):"".concat(s,"?").concat(a);var u=function(t,e,n){if(n||2===arguments.length){for(var o,i=0,r=e.length;i<r;i++){!o&&i in e||(o||(o=Array.prototype.slice.call(e,0,i)),o[i]=e[i])}}return t.concat(o||Array.prototype.slice.call(e))}([],i,!0);u[0]instanceof URL?u[0].search=new URL(s).search:u[0]instanceof Request||(u[0]=s),n.apply(void 0,u).then((function(n){var o=function(){t(n)};if(n.ok){try{for(var r=void 0,s=n.headers.keys(),c=0,a=s;c<a.length;c++){if("bdturing-verify"===a[c]){r=n.headers.get("bdturing-verify");break}}r?j(e,r,(function(){t(window.fetch.apply(window,i))}),o):o()}catch(t){o()}}else{o()}})).catch(o)})):n.apply(void 0,i)}}},T=function(t,e){var n=function(t){var e=t.reduce((function(t,e){return e&&t.push(new RegExp(e)),t}),[]);return function(t){return e.some((function(e){return e.test(t)}))}}(t);!function(t,e){var n=window.XMLHttpRequest.prototype,o=n.open,i=n.setRequestHeader,r=n.overrideMimeType,s=n.send,c=n.addEventListener,a=n.removeEventListener;n._vc_intercepted||(n._vc_intercepted=!0,n.open=function(e,n){try{var i="string"==typeof n?n:n.toString();if(!t(i)){return o.apply(this,arguments)}this._vc_status=1,this._vc_actionList=[],this._vc_actionList.push({origin:o,fnName:"open",arguments:arguments})}catch(t){return o.apply(this,arguments)}},n.overrideMimeType=function(){if(1!==this._vc_status){return r.apply(this,arguments)}this._vc_actionList.push({origin:r,fnName:"overrideMimeType",arguments:arguments})},n.setRequestHeader=function(){if(1!==this._vc_status){return i.apply(this,arguments)}this._vc_actionList.push({origin:i,fnName:"setRequestHeader",arguments:arguments})},n.addEventListener=function(){if(1!==this._vc_status){return c.apply(this,arguments)}this._vc_actionList.push({origin:c,fnName:"addEventListener",arguments:arguments})},n.removeEventListener=function(){if(1!==this._vc_status){return a.apply(this,arguments)}this._vc_actionList.push({origin:a,fnName:"removeEventListener",arguments:arguments})},n.send=function(){if(1!==this._vc_status){return s.apply(this,arguments)}this._vc_actionList.push({origin:s,fnName:"send",arguments:arguments}),F(this,this._vc_actionList,e),delete this._vc_status,delete this._vc_actionList})}(n,e),x(n,e)},V=new w,P=new b,A=new S(V,P),N=function(t,e){return function(){function n(e){var n;this.myRequest=new L,this.options=i(i({},e),t.options),(null===(n=this.options.smsOptions)||void 0===n?void 0:n.host)&&this.myRequest.setHost(this.options.smsOptions.host)}return n.prototype.sendCode=function(t,n){var r=t.mobile;return s(this,void 0,void 0,(function(){var t,a,u,l,p,d,f,h,v,y,m,b,w,g,_,O,C,k,S=this;return c(this,(function(E){switch(E.label){case 0:t=this.options,a=t.commonOptions,u=t.smsOptions,l=t.captchaOptions,p=t.secondVerifyWebOptions,d=Object.assign(i({app_id:a.aid},u),n),f=d.app_id,h=d.channel_id,v=d.scene,y=d.code_type,m=d.language,b=d.event_type,w=d.uid,g=d.template_id,E.label=1;case 1:return E.trys.push([1,4,,5]),[4,e.myFp.getFp()];case 2:return _=E.sent(),[4,this.myRequest.sendCode({mobile:r,app_id:f,channel_id:h,scene:v,code_type:y,language:m,event_type:b,uid:w,template_id:g,verifyFp:_,fp:_},{verifyFp:_,fp:_})];case 3:return O=E.sent(),"PASS"===(C=O.data).decision?[2,O]:[2,new o.Promise((function(t,o){var u=function(){return s(S,void 0,void 0,(function(){var e,i;return c(this,(function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),[4,this.sendCode({mobile:r},n)];case 1:return e=s.sent(),t(e),[3,3];case 2:return i=s.sent(),o(i),[3,3];case 3:return[2]}}))}))};e.autoRender({verify_data:C.decision,commonOptions:a,captchaOptions:i(i({},l),{autoClose:!0,successCb:function(){return s(S,void 0,void 0,(function(){return c(this,(function(t){return"function"==typeof(null==l?void 0:l.successCb)&&l.successCb("success"),u(),[2]}))}))},closeCb:function(){o(O)}}),secondVerifyWebOptions:i(i({},p),{callBack:function(){u()},closeCallBack:function(){o(O)}})})}))];case 4:return k=E.sent(),[2,o.Promise.reject(k)];case 5:return[2]}}))}))},n.prototype.validateCode=function(t,e){var n=t.mobile,o=t.code;return s(this,void 0,void 0,(function(){var t,r,s,a,u,l;return c(this,(function(c){return t=this.options,r=t.commonOptions,s=t.smsOptions,a=Object.assign(i({app_id:r.aid},s),e),u=a.app_id,l=a.scene,[2,this.myRequest.validateCode({mobile:n,app_id:u,scene:l,code:o})]}))}))},n}()}(V,A),W=function(t){var e=new w;return e.setOptions(t),new E(e,A,N)},B=P.getOrSetFp,H=A.init,M=A.renderCaptcha,q=A.autoRender,I=A.renderSecondVerifyWeb,D=N,z=W,U=A.closeCaptcha,J=A.renderCaptcha;window.initVerifyOptions=A.init,window.renderCaptcha=A.renderCaptcha,window.closeCaptcha=A.closeCaptcha,window.getCaptchaWebId=P.getOrSetFp,window.autoRender=A.autoRender,window.renderSecondVerifyWeb=A.renderSecondVerifyWeb,window.SMS=D,window.initVerifyCenter=z,window.verifySDK={renderCaptcha:A.renderCaptcha,closeCaptcha:A.closeCaptcha,getCaptchaWebId:P.getOrSetFp,initVerifyOptions:A.init,renderSecondVerifyWeb:A.renderSecondVerifyWeb,autoRender:A.autoRender,SMS:N,initVerifyCenter:W,init:function(t){t.interceptPathList;var e=r(t,["interceptPathList"]),n=new w,o=new b;n.setOptions(e);var i=new S(n,o);t.interceptPathList&&T(t.interceptPathList,i)},log:A.myLogger.log},window.renderCaptcha&&"function"==typeof window.renderCaptcha.trigger&&window.renderCaptcha.trigger(A.renderCaptcha),"function"==typeof window.mountCaptchaCallback&&window.mountCaptchaCallback(),t.SMS=D,t.autoRender=q,t.closeCaptcha=U,t.default=J,t.getCaptchaWebId=B,t.initVerifyCenter=z,t.initVerifyOptions=H,t.renderCaptcha=M,t.renderSecondVerifyWeb=I,Object.defineProperty(t,"__esModule",{value:!0})}));